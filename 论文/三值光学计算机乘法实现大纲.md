# Abstract

传统电子计算机虽在日常应用广泛，但其在并行性、物理位数限制以及处理器位数等方面存在显著局限，尤其在乘法、矩阵运算和傅里叶变换等计算任务中表现出劣势。随着三值光学计算机的发展，许多理论和原型架构也相继问世。本研究着重于三值光学计算机上 modified signed-digit （MSD）乘法的研究与实现。在该计算模型中，完成了乘法运算中部分积生成和部分积求和的过程，并结合三值光学计算机的特性提出了不同的乘法实现方案及相应的处理器位分配策略。实验结果表明，在高位数相乘情况下，三值光学计算机基于并行性原理的运算性能显著高于传统电子计算机。



关键字：乘法，三值光学计算机， modified signed-digit ，处理器位分配策略

# Introduction

在应对不断增加的数值计算应用复杂度的挑战时，对电子计算机的计算效率提出了更高的要求。尽管电子计算机可以满足大部分应用的计算需求，但其复杂的硬件结构和高能耗等问题逐渐凸显。为了解决这一问题，研究者们开始探索新型的计算机解决方案，包括量子计算机、生物计算机以及光学计算机。尽管光学计算机相关技术和部件尚未完全成熟，真正的全光学计算机尚未实现，但在这种情况下，研究者们提出了一种新型的电子计算机系统结构。该计算机采用了基于FPGA设计的可重构多值逻辑电子运算器，并成功设计并实现了众位数可重构型 MSD并行加法器，进而在其基础上实现了乘法运算。通过将光学计算机的技术成功移植到电子部件上，为电子计算机的性能提升提供了一种创新的途径。


该乘法器分为上位机和下位机。上位机负责接收用户的运算请求，并通过数据分析、运算信息生成和数据格式化等模块处理请求信息，然后利用通信模块将格式化后的数据封装成文件并传输给下位机。具体而言，数据分析模块用于提取用户请求的运算类型、操作数；运算信息生成模块则根据数据分析结果生成完成运算所需的信息；数据格式化模块则负责将运算信息按照规定的格式进行处理，以符合下位机的解析规则；而通信模块则负责将格式化后的数据文件传输给下位机。

下位机则接收上位机传输的文件，并通过解析模块解析其中的运算信息，然后根据解析结果控制MSD并行加法器的工作状态。同时，下位机还通过监控系统监测电平信号的运行情况，包括电平变换、信号强度等。最后，下位机利用通信模块接收上位机传来的文件，并将运算结果封装成文件，通过数据传输传输给上位机。

# 正文

## MSD加法

传统的电子计算机使用二进制（0和1）进行运算，其中任何十进制数都有唯一的表示形式。然而，三值光学计算机采用了最高有效数字（MSD）数字系统，该系统表示一种带符号位的三值二进制数，使得同一个十进制数可以具有多种表达形式，从而为无进位加法提供了理论基础。该系统最早由A. Avizienis等人于1961年提出，并于1986年被Drake等人引入光学计算领域。该系统的符号集为{u，0，1}，其中u表示数值-1。任意一个十进制数D可以使用MSD数字系统表示，其表达式如下所示：

$$
A = \sum_{i} a_i \times 2^i
$$
上述公式的$a_i$的取值是{u，0，1}，其中i是自然数，$2^i$表明这个数字仍然是二进制数字。MSD加法与常规的二进制加法不同，它通过四个变换（T，W，T‘，W’）来完成，这四个变换都是三值逻辑运算，由于MSD的冗余性不管被加数有多少位完成相应加法只需要三个时钟周期。假设有MSD数$A = \sum a_i \times 2^i$,i=0,1,...,n-1，MSD数$B = \sum b_j \times 2^j$,j=0,1,...,m-1。

$a_i 和 b_j$符号集均是{u，0，1}，其中n和m均为正整数，i和j均为自然数，$0 \leq i \leq n-1,0 \leq j \leq m-1$。MSD加法运算过程如下：

1. 对输入的A和B按位进行T，W运算。（T运算的结果低位补0，W运算的结果高位补0）
2. 对第一步运算的结果对照表按位进行T‘，W’运算。（T‘运算的结果低位补0，W‘运算的结果高位补0）
3. 对第二步运算的结果对照表按位进行T2运算，最终得到A和B的和。

![image-20240227160234142](C:\Users\EDY\AppData\Roaming\Typora\typora-user-images\image-20240227160234142.png)

MSD加法理论已经在上文中介绍了。接下来，将构建MSD并行加法器并阐明在FPGA上实现MSD并行加法器的方法。2021年，王宏健教授及其团队发明了一种新颖的MSD并行加法器电路结构，称为JW-MSD加法器。该结构放弃了三值逻辑运算器的可重构性，而是根据MSD加法器的逻辑运算需求直接设计了特定的三值逻辑运算器。因此，它产生了一个逻辑门数量更少的专用型JW-MSD加法。

JW-MSD并行加法器如表2.2所示，由五个三值逻辑运算器组成，分别是Y运算器、F运算器、J运算器、I运算器和N运算器。它们使用三个二位二值符号“00”、“01”和“10”来表示MSD数的“0”、“-1”和“1”。该专用型JW-MSD并行加法器由三种运算模块以及输入寄存器和输出寄存器组成。三种运算模组分别为A运算模组，B运算模组和C运算模组。专用型JW-MSD并行加法器的原理图如图4-1所示。对于n位的专用型JW-MSD并行加法器，用$a_{n-1} a_{n-2}...a_1 a_0$和$b_{n-1} b_{n-2}...b_1 b_0$来表示加法器的输入操作数，用$c_{n-1} c_{n-2}...c_1 c_0$来表示加法器的输出。每一位都用两位二值来表示，因此用${a_i}^0$表示第i位的低位输入，${a_i}^1$表示第i位的高位输入；${b_i}^0$表示第i位的低位输入，${b_i}^1$表示第i位的高位输入；${c_i}^0$表示第i位的低位输出，${c_i}^1$表示第i位的高位输出。

![image-20240305181756308](C:\Users\EDY\AppData\Roaming\Typora\typora-user-images\image-20240305181756308.png)

## MSD乘法

MSD乘法器分为上位机和下位机。MSD乘法器使用M变换和MSD加法器来实现。M变换是指两个1位MSD数的逻辑变换，这样可以完成1位的MSD数乘法运算，M变换真值表如表所示。设被乘数 A 的位数有 n 位，记A= $a_{i}...a_1a_0$,其MSD表达式$ A=\sum a_i \times 2^i $ ,i=0,1,...n-1。乘数 B 有 m 位，记为B=$b_{j}...b_1b_0$,其MSD表达式$ B=\sum b_j \times 2^j $,j=0,1,...m-1,n与m均为自然数。因此$ C=A \times B $可以表示成：
$$
C=A \times B=A \times \sum b_j \times 2^j = \sum A \times b_j \times 2^j=\sum S_j \times 2^j=\sum P_j
$$
从公式可以观察到，MSD（Multiple Segments Digits）乘法采用了部分积和部分积求和的方法。在部分积求和的过程中，MSD乘法通过M变换对乘数和被乘数进行变换，生成一个部分积，并依次对后续位数进行变换，得到一系列部分积。最终，通过下位机的MSD加法器进行累加，得到MSD积。在M变换和MSD加法的过程中，由于MSD数具有自带的冗余性，前一位不依赖于后一位的进位。因此，采用流水线方式并行进行计算，以提高效率。流水线并行的计算方式如图所示。







# 实验过程

























